/**
 * @license text 2.0.15 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/text/LICENSE
 */

define("sp/modalHelper",["jquery","sp/global"],function(e,t){"use strict";var n=function(t){e(t).trigger("reset")},i=function(e){e.reset()};return{setupFocus:function(n,i){e(n).on("shown.bs.modal",function(){e(this).find(":tabbable").first().focus()}),e(n).on("hidden.bs.modal",function(){t.resetOnErrorDocumentTitle(),e(i).focus()})},disableButtonOnClick:function(t){t=t?t:2e3,e(".sp-preloading").on("click",function(){e(this).addClass("disabled btn-loading").delay(t).queue(function(){e(this).removeClass("disabled btn-loading").dequeue()})})},unsetLoadingStatus:function(){e(".sp-preloading").removeClass("disabled btn-loading")},cleanFormOnHideModal:function(t,r,o){e(r).on("hide.bs.modal",function(){n(o),i(t)})},closeModal:function(t){e(t).modal("hide")}}}),define("sp/vdd/vddTooltip",[],function(){function e(e,t){return $.inArray(e,t)>=0}function t(t){return e(t.type,["Exposant","Indice","LienIntra","LienInterne","Valeur"])?t.content.elementsTerminaux[0].content:e(t.type,["MiseEnEvidence","Expression"])?t.content.elementsTerminaux[0].elementsTerminaux[0].content:"Citation"===t.type?"« "+t.content.elementsTerminaux[0].elementsTerminaux[0].content+" »":"Variable"===t.type?"["+t.content.elementsTerminaux[0].elementsTerminaux[0].content+"]":"TermeEtranger"===t.type?t.content.elementsTerminaux[0].content.elementsTerminaux[0].content:"LienExterne"===t.type?t.content.elementsTerminaux[0].content+" ("+t.content.elementsTerminaux[0].url+")":void 0}function n(e){for(var n="",i=0;i<e.elements[0].elementsTerminaux.length;i++){var r=e.elements[0].elementsTerminaux[i];"string_wrapper"===r.typeDTO?n+=r.content:"type_texte_structure_inline_balise"===r.typeDTO&&(n+=t(r))}return n}return{generateTooltipContent:n}}),define("sp/marquage",["jquery","smarttag"],function(e){e.fn.extend({isXitiReportDisabled:!1});var t={};return{disableXitiReport:function(){e.fn.isXitiReportDisabled=!0},enableXitiReport:function(){e.fn.isXitiReportDisabled=!1},init:function(n,i,r,o){t.secure=n||"",t.site=i||"",t.log=r||"",t.logSSL=o||"",t.marker=new ATInternet.Tracker.Tag({secure:t.secure,site:t.site,log:t.log,logSSL:t.logSSL}),e.fn.isXitiReportDisabled=!1},options:t,getTag:function(){return t.marker},setClickManagement:function(t){return"yes"===t.data("atclickmanagement")?t:(e.inArray(t.data("toggle"),["collapse","dropdown"])!==-1&&t.attr("data-atclickmanagement","no"),"submit"===t.attr("type")&&"BUTTON"===t.get(0).nodeName&&t.attr("data-atclickmanagement","no"),"action"===t.data("xiti-type")&&t.attr("data-atclickmanagement","no"),t)},makeCall:function(t){var n=e(t);if(null===n.attr("data-xiti-name")||""===n.attr("data-xiti-name"))return!0;if(this.setClickManagement(n),e.fn.isXitiReportDisabled===!1&&void 0!==this.getTag()){var i=n.attr("data-xiti-name")||"",r=n.attr("data-xiti-type")||"navigation";return n.attr("data-xiti-logout")&&this.getTag().identifiedVisitor.unset(),this.getTag().click.send({elem:t,name:i,type:r})}return!0}}}),define("sp/persogeo/components/apiService",["jquery"],function(e){"use strict";var t="/geo/rechercheJson";return{getGeoData:function(n,i,r,o){e.ajax({url:t,method:"GET",dataType:"json",data:n}).done(i).fail(r).always(o)}}}),define("sp/persogeo/components/container",["jquery"],function(e){return{getByFormId:function(t){var n=[],i=e("#"+t),r=i.parents(".choice-tree-item-demarche");if(r.length>0)return n.push(r),n;var o=i.parents(".fiche-item-content");if(o.length>0)return n.push(o),n;var a=i.parents(".tab-pane");if(a.length>0)return n.push(a),n;var s=i.parents("[data-ou-s-adresser]");if(s.length>0){var c=e("li[data-for="+t+"]");return e.each(c,function(t,i){n.push(e(i).parents("[data-ou-s-adresser]"))}),n}var l=i.parents("[data-persogeo=ficheRessource]");return l.length>0?(n.push(l),n):void 0}}}),function(e,t){"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?t(exports):"function"==typeof define&&define.amd?define("mustache",["exports"],t):(e.Mustache={},t(e.Mustache))}(this,function(e){function t(e){return"function"==typeof e}function n(e){return m(e)?"array":typeof e}function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function r(e,t){return null!=e&&"object"==typeof e&&t in e}function o(e,t){return v.call(e,t)}function a(e){return!o(g,e)}function s(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return b[e]})}function c(t,n){function r(){if(g&&!b)for(;v.length;)delete h[v.pop()];else v=[];g=!1,b=!1}function o(e){if("string"==typeof e&&(e=e.split(C,2)),!m(e)||2!==e.length)throw new Error("Invalid tags: "+e);s=new RegExp(i(e[0])+"\\s*"),c=new RegExp("\\s*"+i(e[1])),p=new RegExp("\\s*"+i("}"+e[1]))}if(!t)return[];var s,c,p,f=[],h=[],v=[],g=!1,b=!1;o(n||e.tags);for(var x,w,S,D,O,E,P=new u(t);!P.eos();){if(x=P.pos,S=P.scanUntil(s))for(var N=0,M=S.length;N<M;++N)D=S.charAt(N),a(D)?v.push(h.length):b=!0,h.push(["text",D,x,x+1]),x+=1,"\n"===D&&r();if(!P.scan(s))break;if(g=!0,w=P.scan(k)||"name",P.scan(y),"="===w?(S=P.scanUntil(T),P.scan(T),P.scanUntil(c)):"{"===w?(S=P.scanUntil(p),P.scan(A),P.scanUntil(c),w="&"):S=P.scanUntil(c),!P.scan(c))throw new Error("Unclosed tag at "+P.pos);if(O=[w,S,x,P.pos],h.push(O),"#"===w||"^"===w)f.push(O);else if("/"===w){if(E=f.pop(),!E)throw new Error('Unopened section "'+S+'" at '+x);if(E[1]!==S)throw new Error('Unclosed section "'+E[1]+'" at '+x)}else"name"===w||"{"===w||"&"===w?b=!0:"="===w&&o(S)}if(E=f.pop())throw new Error('Unclosed section "'+E[1]+'" at '+P.pos);return d(l(h))}function l(e){for(var t,n,i=[],r=0,o=e.length;r<o;++r)t=e[r],t&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(i.push(t),n=t));return i}function d(e){for(var t,n,i=[],r=i,o=[],a=0,s=e.length;a<s;++a)switch(t=e[a],t[0]){case"#":case"^":r.push(t),o.push(t),r=t[4]=[];break;case"/":n=o.pop(),n[5]=t[2],r=o.length>0?o[o.length-1][4]:i;break;default:r.push(t)}return i}function u(e){this.string=e,this.tail=e,this.pos=0}function p(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function f(){this.cache={}}var h=Object.prototype.toString,m=Array.isArray||function(e){return"[object Array]"===h.call(e)},v=RegExp.prototype.test,g=/\S/,b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},y=/\s*/,C=/\s+/,T=/\s*=/,A=/\s*\}/,k=/#|\^|\/|>|\{|&|=|!/;u.prototype.eos=function(){return""===this.tail},u.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},u.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},p.prototype.push=function(e){return new p(e,this)},p.prototype.lookup=function(e){var n,i=this.cache;if(i.hasOwnProperty(e))n=i[e];else{for(var o,a,s=this,c=!1;s;){if(e.indexOf(".")>0)for(n=s.view,o=e.split("."),a=0;null!=n&&a<o.length;)a===o.length-1&&(c=r(n,o[a])),n=n[o[a++]];else n=s.view[e],c=r(s.view,e);if(c)break;s=s.parent}i[e]=n}return t(n)&&(n=n.call(this.view)),n},f.prototype.clearCache=function(){this.cache={}},f.prototype.parse=function(e,t){var n=this.cache,i=n[e];return null==i&&(i=n[e]=c(e,t)),i},f.prototype.render=function(e,t,n){var i=this.parse(e),r=t instanceof p?t:new p(t);return this.renderTokens(i,r,n,e)},f.prototype.renderTokens=function(e,t,n,i){for(var r,o,a,s="",c=0,l=e.length;c<l;++c)a=void 0,r=e[c],o=r[0],"#"===o?a=this.renderSection(r,t,n,i):"^"===o?a=this.renderInverted(r,t,n,i):">"===o?a=this.renderPartial(r,t,n,i):"&"===o?a=this.unescapedValue(r,t):"name"===o?a=this.escapedValue(r,t):"text"===o&&(a=this.rawValue(r)),void 0!==a&&(s+=a);return s},f.prototype.renderSection=function(e,n,i,r){function o(e){return a.render(e,n,i)}var a=this,s="",c=n.lookup(e[1]);if(c){if(m(c))for(var l=0,d=c.length;l<d;++l)s+=this.renderTokens(e[4],n.push(c[l]),i,r);else if("object"==typeof c||"string"==typeof c||"number"==typeof c)s+=this.renderTokens(e[4],n.push(c),i,r);else if(t(c)){if("string"!=typeof r)throw new Error("Cannot use higher-order sections without the original template");c=c.call(n.view,r.slice(e[3],e[5]),o),null!=c&&(s+=c)}else s+=this.renderTokens(e[4],n,i,r);return s}},f.prototype.renderInverted=function(e,t,n,i){var r=t.lookup(e[1]);if(!r||m(r)&&0===r.length)return this.renderTokens(e[4],t,n,i)},f.prototype.renderPartial=function(e,n,i){if(i){var r=t(i)?i(e[1]):i[e[1]];return null!=r?this.renderTokens(this.parse(r),n,i,r):void 0}},f.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},f.prototype.escapedValue=function(t,n){var i=n.lookup(t[1]);if(null!=i)return e.escape(i)},f.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="2.2.1",e.tags=["{{","}}"];var x=new f;e.clearCache=function(){return x.clearCache()},e.parse=function(e,t){return x.parse(e,t)},e.render=function(e,t,i){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+n(e)+'" was given as the first argument for mustache#render(template, view, partials)');return x.render(e,t,i)},e.to_html=function(n,i,r,o){var a=e.render(n,i,r);return t(o)?void o(a):a},e.escape=s,e.Scanner=u,e.Context=p,e.Writer=f}),define("sp/persogeo/components/htmlGenerator",["jquery","mustache"],function(e,t){"use strict";return{buildToGoMarkup:function(e){if(!e)return"";var n='<p class="geo-perso-item-how">  <span class="icon icon-pieton" aria-hidden="true"></span>  <strong>Sur place</strong></p><div itemprop="address" itemscope itemtype="http://schema.org/PostalAddress">  <p>    <span itemprop="streetAddress">{{mainAddress}}</span><br>    {{#complementaryAddresses}}      <span>{{.}}</span>      <br>    {{/complementaryAddresses}}    <span itemprop="postalCode">{{codePostal}}</span>    <span itemprop="addressLocality">{{nom}}</span>  </p></div>';if(e.lignes.length){var i=e.lignes.slice();e.mainAddress=i.shift(),e.complementaryAddresses=i}return t.render(n,e)},buildOrganismeMarkup:function(e,n){if(!n)return"";var i='<p class="geo-perso-item-title">  <button aria-expanded="false" aria-controls="where-{{uid}}" class="btn btn-collapse collapsed" data-target="#where-{{uid}}" data-toggle="collapse">    <span data-persogeo="address-name">{{name}}</span>  </button></p>';return t.render(i,{uid:e,name:n})},buildEmailMarkup:function(e){if(!e)return"";var n='<p>  <span class="contact-detail">Courriel : </span>  <span itemprop="email">{{email}}</span></p>';return e=e.replace("@"," [ à ] "),t.render(n,{email:e})},buildUrlMarkup:function(e){if(!e)return"";var n='<p class="geo-perso-item-how">  <span class="icon icon-web" aria-hidden="true"></span>  <strong>En ligne</strong></p><span class="contact-detail">Site Internet : </span><span itemprop="url">  <a href="{{url}}" target="_blank" title="{{url}} - Nouvelle fenêtre">  {{url}}&nbsp;<span class="icon icon-external-link" aria-hidden"true"></span>  </a></span></p>';return t.render(n,{url:e})},buildSVEMarkup:function(e){var n='<p class="geo-perso-item-how">  <span class="icon icon-web" aria-hidden="true"></span>  <strong>En ligne</strong></p><div itemprop="url"> <p> {{#email}}<a href="mailto:{{email}}" class="send-mail">Saisine par voie électronique</a>{{/email}} {{#url}}<a href="{{url}}" target="_blank">Saisine par voie électronique <span class="icon icon-external-link" title="nouvelle fenêtre" aria-hidden="true"></span></a>{{/url}} </p></div>',i=new RegExp("[_A-Za-z0-9-\\+-]+(\\.[_A-Za-z0-9-\\+-]+)*@[A-Za-z0-9-]+(\\.[A-Za-z0-9-\\+-]+)*(\\.[A-Za-z]{2,})");return i.test(e)?t.render(n,{email:e}):t.render(n,{url:e})},buildFaxMarkup:function(e){if(!e)return"";var n='<p>  <span class="contact-detail">Télécopie : </span>  <span itemprop="faxNumber">{{fax}}</span></p>';return t.render(n,{fax:e})},buildPhoneMarkup:function(e,n){if(!e)return"";var i='<p class="geo-perso-item-how">  <span class="icon icon-phone" aria-hidden="true"></span>  <strong>Téléphone</strong></p><p>  <span itemprop="telephone">{{phone}}</span>  <br>  {{#cost}}<span>({{.}})</span>{{/cost}}</p>';return t.render(i,{phone:e,cost:n})},buildCallCenterMarkup:function(e,n,i){if(!e)return"";var r='<p class="geo-perso-item-how">  <span class="icon icon-phone" aria-hidden="true"></span>  <strong>Téléphone</strong></p><p>  <span itemprop="telephone">{{phone}}</span>  <br>  {{#cost}}<span>({{.}})</span>{{/cost}}  {{#description}}<span>({{.}})</span>{{/description}}</p>';return t.render(r,{phone:e,cost:n,description:i})},buildOnlineMarkup:function(e,n){if(!e)return"";var i='<p class="geo-perso-item-how">  <span class="icon icon-web" aria-hidden"true"></span>  <strong>Service en ligne</strong></p>{{#description}}<div>{{.}}</div>{{/description}}<span itemprop="url">  <a href="{{url}}" target="_blank" title="{{url}} - Nouvelle fenêtre">  {{url}}&nbsp;<span class="icon icon-external-link" aria-hidden="true"></span>  </a></span></p>';return t.render(i,{url:e,description:n})},buildToWriteMarkup:function(e,n){if(!e)return"";var i='<p class="geo-perso-item-how">  <span class="icon icon-ecrire" aria-hidden="true"></span>  <strong>Par correspondance</strong></p><div itemprop="address" itemscope itemtype="http://schema.org/PostalAddress">  <p>    <span class="address-name" data-persogeo="address-name">{{name}}</span>    <br>    <span itemprop="streetAddress">{{address.mainAddress}}</span>    <br>    {{#address.complementaryAddresses}}      <span>{{.}}</span>      <br>    {{/address.complementaryAddresses}}    <span itemprop="postOfficeBoxNumber">{{address.codePostal}} {{address.nom}}</span>    <br>  </p></div>';if(e.lignes.length){var r=e.lignes.slice();e.mainAddress=r.shift(),e.complementaryAddresses=r}return t.render(i,{address:e,name:n})},buildOpeningDaysMarkup:function(n){if(!n||0===n.length)return"";var i='<p class="geo-perso-item-how">  <span class="icon icon-horaires" aria-hidden="true"></span>  <strong>Horaires d\'ouverture</strong></p><div>  {{#openingDays}}    <p>     {{#singleOpening}} Le {{from}} : {{/singleOpening}}     {{^singleOpening}} Du {{from}} au {{to}} : {{/singleOpening}}     {{#openingHours}}       {{#additional}}et{{/additional}} de {{from}} à {{to}}     {{/openingHours}}     <br>     {{#note}}       <span>({{.}})</span>     {{/note}}    </p>  {{/openingDays}}</div>';return e.each(n,function(t,n){n.singleOpening=n.from===n.to,e.each(n.openingHours,function(e,t){t.from=t.from?t.from.replace(":","h"):"manquant",t.to=t.to.replace(":","h"),t.additional=e>0})}),t.render(i,{openingDays:n})},buildDateVerificationMarkup:function(e,n){var i='<p class="date">Vérifié le {{date}}{{#source}} par {{.}}{{/source}}</p>';return t.render(i,{date:e,source:n})},buildCommentMarkup:function(e){return t.render("{{#comment}}<div>{{&.}}</div>{{/comment}}",{comment:e})},buildNoOnlineServiceMarkup:function(e){return'<div class="bloc-edito bloc-aNoter">  <p class="bloc-edito-title">    <span class="icon icon-aNoter" aria-hidden="true"></span>    <strong> À noter :</strong>  </p>  <p>'+e+"</p></div>"},buildNoCityFoundMarkup:function(e){var n='<div class="alert alert-bloc alert-error" role="alert" tabindex="-1" aria-live="polite" data-persogeo="alert-bloc">  <p>Aucune commune ne correspond à {{&postalCode}}</p></div>';return t.render(n,{postalCode:e})},buildTechnicalErrorMarkup:function(e){var n='<div class="alert alert-bloc alert-danger" role="alert" tabindex="-1" aria-live="polite">  <p>    Une erreur technique est survenue pendant votre recherche. Merci de réessayer et de nous informer de votre problème     <a href="{{url}}" rel="nofollow">en faisant une remarque sur cette page</a>.  </p></div>';return t.render(n,{url:e})},buildAddressTitleMarkup:function(e){var n='<h5 class="where-title-1">  <span class="address-name" data-persogeo="address-name">{{name}}</span></h5>';return t.render(n,{name:e})},buildNoCitySelectedMarkup:function(e,n){var i=n.attr("id");i=i.replace("geoSearchForm","");var r='<div id="alert-block-informer-'+i+'" class="alert alert-bloc alert-danger" role="alert" data-persogeo="alert-bloc" aria-hidden="false">  <p>Sélectionner votre commune dans la liste des suggestions</p></div>';return t.render(r,{commune:e})}}}),define("sp/securityUtils",[],function(){"use strict";return{replaceXSS:function(e){if(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};Object.keys(t).forEach(function(n){e=e.replace(new RegExp(n,"g"),t[n])})}return e}}}),define("sp/autocomplete-a11y",["jquery","sp/global"],function(e,t){"use strict";function n(t,n,i){var r=v();r.element=n,r.data=i,e("body").trigger(t,r)}function i(t,i,r,o){var a=null,s=v();t===b&&null!==i&&null!==i.item?(a=null!==o.cle?"ac-"+o.cle.toLowerCase():"ac-"+o.cle,s.data=i.item,s.element=r,e.isFunction(o.select)&&o.select(i,r),n(a,r,s)):t===y&&null!==r&&(a=null!==o.cle?"ac-"+o.cle.toLowerCase():"ac-"+o.cle,s.data={indicatifPays:null,nationalite:null,nom:r.val()},s.element=r,n(a,r,s))}function r(t,n,i){var r=t.parent().find("div[role='listbox']");r.empty().parent().addClass("hide"),t.parent().find("div.a11yPoliteMessage p").empty(),t.removeClass("noValidate"),n&&t.focus(),i&&e.isFunction(i.hide)&&(i.hide(t,i.dirty),i.dirty=!1)}function o(e,t){e.length>0?e.focus():t.focus()}function a(t,n,a,s,c){var l=t.parent().find("div[role='listbox'] div.a11y-suggestion").first(),d=t.parent().find("div[role='listbox'] div.a11y-suggestion").last(),u=e(c.currentTarget),p=u.prev(),f=u.next();if("click"===c.type||13===c.keyCode)i(b,{item:a},t,s),r(t,!0,s),c.preventDefault();else switch(c.keyCode){case 27:r(t,!0,s);break;case 9:c.shiftKey?(o(p,t),c.preventDefault()):f.length>0?(f.focus(),c.preventDefault()):(i(y,null,t,s),r(t,!1,s));break;case 40:o(f,l),c.preventDefault();break;case 38:o(p,d),c.preventDefault()}}function s(e,t,n,i){t.on("click",function(r){a(e,t,n,i,r)}).on("keydown",function(r){a(e,t,n,i,r)})}function c(t,n,i){var o=t.parent().find("div[role='listbox']");r(o,!1,null),t.addClass("noValidate"),o.size()>0&&(i.length>0?e.isFunction(n.format)&&(i.forEach(function(i){var r=e("<div class='a11y-suggestion' role='option' tabindex='-1'></div>").append(n.format(i));o.append(r),s(t,r,i,n)}),t.parent().find("div.a11yPoliteMessage p").text(i.length+" suggestions"),o.parent().removeClass("hide"),o.parent().scrollTop(0)):(o.append("<div aria-hidden='true'><p>Aucun résultat</p></div>").parent().removeClass("hide"),t.parent().find("div.a11yPoliteMessage p").text("aucun résultat")))}function l(t,n){var i=e.isFunction(n.data)?n.data(t):n.data;h(n);var r={url:n.url(),data:i,beforeSend:function(e){void 0===C[n.cle]&&(C[n.cle]=[]),C[n.cle].push(e)},success:function(i){e.isFunction(n.callback)&&null!==i&&c(t,n,n.callback(i))},error:function(e,t){"timeout"===t&&n.timeoutCallback&&n.timeoutCallback()}};n.timeout&&(r.timeout=n.timeout),e.ajax(r)}function d(t){var n=e("<div class='sr-only a11yPoliteMessage' aria-live='polite'><p></p></div>");n.insertBefore(t);var i="message"+t.attr("id"),r=e("<p id='"+i+"' class='hide a11yMessage'>Des suggestions de saisie vous seront proposées lors de votre saisie après le champ - <b>Utilisez la tabulation (ou les touches flèches) pour naviguer dans la liste des suggestions</b></p>");r.insertBefore(t),m(t,"aria-describedby",i),t.parent().addClass("select-a11y");var o=e("<div class='a11y-suggestions hide' data-test='a11y-suggestions-container'><div role='listbox'></div></div>");return o.insertAfter(t),o}function u(e,t,n){var o=e.parent().find("div[role='listbox'] div.a11y-suggestion"),a=!t.shiftKey&&9===t.keyCode,s=t.shiftKey&&9===t.keyCode,c=40===t.keyCode,l=27===t.keyCode;(a||c)&&(o.length>0?(o.first().focus(),t.preventDefault()):c&&(e.trigger("input","custom"),t.preventDefault())),a&&0===o.length&&(i(y,null,e,n),r(e,!1,n)),(l||s)&&(i(y,null,e,n),r(e,!0,n))}function p(t,n){var o=t.parent().find("div[role='listbox']");t.on("input",function(i,a){r(e(this),!1,null),"true"===e(this).attr("data-enableAutocompleteV2")&&null!==n&&o.size()>0&&("custom"!==a&&e.isFunction(n.input)&&(n.dirty=!0,n.input(t)),e(this).val().length>=n.minLength?l(e(this),n):e(this).parent().find("div.a11yPoliteMessage p").empty())}).on("keydown",function(t){u(e(this),t,n)}).on("blur",function(){i(y,null,t,n)}),e("body").on("click",function(a){var s=e(a.target);s.is(t)||s.is(o.parent())||s.is(o)||s.is(".a11y-suggestion")||(i(y,null,t,n),r(t,!1,n))})}function f(t,n){t.each(function(){n.dirty=!1,d(e(this)),p(e(this),n),e(this).enableAutocompletionV2()})}function h(e){var t=C[e.cle];if(void 0!==t){for(var n=0;n<t.length;n++)t[n].abort();C[e.cle].length=0}}function m(e,t,n){if(null!==e&&e.size()){if(null!==e.attr(t)){var i=e.attr(t);n=i+" "+n}e.attr(t,n)}}function v(){return new g}function g(){var e=this;e.element=null,e.data=null}var b="select",y="change",C={};return e.fn.initAutocompletionV2=function(t){f(e(this),t)},e.fn.disableAutocompletionV2=function(){e(this).attr("data-enableAutocompleteV2","false")},e.fn.enableAutocompletionV2=function(){e(this).attr("data-enableAutocompleteV2","true")},{}}),define("sp/persogeo/components/searchComponent",["sp/persogeo/components/container","sp/persogeo/components/htmlGenerator","sp/securityUtils","sp/autocomplete-a11y","jquery"],function(e,t,n,i,r){"use strict";function o(e){0!==r("#persogeo-confirm-span").length&&r("#persogeo-confirm-span").focus(),e.next("[data-persogeo=annuaire-where]").children("[data-persogeo=confirm]").find(":focusable").first().focus()}function a(e){e.find("[data-persogeo=pivot-content]>h3,[data-persogeo=pivot-content]>[data-persogeo=description]").remove(),e.find("[data-persogeo=pivot-content]").children().children().unwrap(),e.find("[data-persogeo=pivot-content]").children().unwrap(),e.find("[data-persogeo=pivot-content]").removeAttr("data-persogeo"),e.find("[role=presentation]").removeAttr("role"),e.find("[data-persogeo=pivot-cloned]").remove(),r.each(e.find("[data-persogeo=pivot-selected]"),function(){r(this).html(r(this).data("defaultContent"))}),e.find("[data-ou-s-adresser]:hidden").show(),e.find("[data-persogeo=pivot-selected]").removeAttr("data-persogeo"),e.find("[data-persogeo=pivot-hidden]").removeAttr("data-persogeo").show(),e.find("[data-persogeo=confirm]").html(""),r("[data-pivot-local-service-en-ligne]").addClass("hidden"),r("[data-pivot-local-service-en-ligne]").attr("tabindex","-1"),r("[data-aNoter-persogeo-id]").html(""),r("[data-attention-persogeo-id]").removeClass("hidden"),r("[data-aNoter-raccordement-demarche]").removeClass("hidden"),e.find("[data-persogeo=searchGeoSearchForm]").focus()}function s(e,i){var o=e.charAt(0).toUpperCase()+e.substring(1),a=r("#search"+o).val(),s=t.buildNoCityFoundMarkup(n.replaceXSS(a));i.next("[data-persogeo=annuaire-where]").children("[data-persogeo=confirm]").html(s),r("[data-pivot-local-service-en-ligne]").addClass("hidden"),r("[data-pivot-local-service-en-ligne]").attr("tabindex","-1"),r("[data-aNoter-raccordement-demarche]").removeClass("hidden"),r("[data-aNoter-persogeo-id]").html(""),r("[data-attention-persogeo-id]").removeClass("hidden")}function c(e,n){var i=t.buildNoCitySelectedMarkup(n,e);e.next("[data-persogeo=annuaire-where]").children("[data-persogeo=confirm]").html(i),r("[data-pivot-local-service-en-ligne]").addClass("hidden"),r("[data-pivot-local-service-en-ligne]").attr("tabindex","-1"),r("[data-aNoter-raccordement-demarche]").removeClass("hidden"),r("[data-aNoter-persogeo-id]").html(""),r("[data-attention-persogeo-id]").removeClass("hidden")}function l(e,t){var n=e.find("[data-persogeo=searchGeoAutocomplete]");n.initAutocompletionV2({cle:"persogeo",minLength:1,url:function(){return"/geo/suggest"},input:function(e){e.data("persogeo-selected-insee",null),e.siblings("button[type=reset]").addClass("hidden")},hide:function(t,n){if(n&&null===t.data("persogeo-selected-insee")){c(e,t.val());var i=t.val();t.val(""),t.val(i),t.focus()}},select:function(e,n){n.val(""),n.val(e.item.nom+" ("+e.item.departmentCode+")"),n.data("persogeo-selected-insee",e.item.insee),n.focus(),n.siblings("button[type=reset]").removeClass("hidden"),t(e.item.insee)},format:function(e){return e.nom+" ("+e.departmentCode+")"},callback:function(e){return e},data:function(e){return{term:e.val()}}})}return{focusOnConfirmation:o,resetSearch:a,displayNoResultMessage:s,initAutocomplete:l}}),define("sp/persogeo/components/constants",[""],function(){"use strict";return{TAB:{EN_LIGNE:"enligne",PAR_CORRESPONDANCE:"parcorres",SUR_PLACE:"surplace"},ADDRESS_TYPE:{POSTAL:"postale",PHYSICAL:"physique",GEOPOSTAL:"géopostale"},TITLE:{PAR_CORRESPONDANCE:"Par correspondance",SUR_PLACE:"Sur place"},SCOPE:{INFORMER:"sinformer"},DISTRICT:{PARIS:"75"},KEYWORD:{LOCAL_PERSONNALISE_SUR_SP:"Local personnalisé sur SP",LOCAL_PERSONNALISABLE:"Local personnalisable"}}}),define("sp/persogeo/components/markup",["jquery","sp/persogeo/components/htmlGenerator","sp/persogeo/components/constants"],function(e,t,n){"use strict";return{build:function(i,r,o){var a="";a+=t.buildOrganismeMarkup(i,r.nom),a+="<div class='collapse collapse-inner' id='where-"+i+"'>";var s,c,l,d,u,p;return null===r.coordonneesNumDTO&&(r.coordonneesNumDTO={telephone:"Non renseigné.",coutTelephone:null,fax:null,url:null,email:null,versionMobile:null}),r.adresseDTOs[0].type===n.ADDRESS_TYPE.PHYSICAL?c=r.adresseDTOs[0]:r.adresseDTOs[0].type===n.ADDRESS_TYPE.POSTAL?l=r.adresseDTOs[0]:r.adresseDTOs[0].type===n.ADDRESS_TYPE.GEOPOSTAL?c=l=r.adresseDTOs[0]:r.adresseDTOs[1]&&r.adresseDTOs[1].type===n.ADDRESS_TYPE.PHYSICAL&&(c=r.adresseDTOs[0]),r.adresseDTOs[1]&&r.adresseDTOs[1].type===n.ADDRESS_TYPE.POSTAL&&(l=r.adresseDTOs[1]),null===r.serviceDTOs||0===r.serviceDTOs.length?(d=o.parents("[class*=tab-pane]").attr("id"),u=e('[href="#'+d+'"]').parents("li").data("geo-tab-type"),p="listeOuSAdresser"===o.parents()[0].getAttribute("data-liste-ousadresser-id"),c&&(o.parents().is("[class*=tab-pane]")?u===n.TAB.SUR_PLACE?(a+=t.buildToGoMarkup(c),a+=t.buildOpeningDaysMarkup(r.openingDaysDTO)):u!==n.TAB.PAR_CORRESPONDANCE&&p&&(a+=t.buildToGoMarkup(c),a+=t.buildOpeningDaysMarkup(r.openingDaysDTO)):(a+=t.buildToGoMarkup(c),a+=t.buildOpeningDaysMarkup(r.openingDaysDTO))),l&&(o.parents().is("[class*=tab-pane]")?u===n.TAB.PAR_CORRESPONDANCE?a+=t.buildToWriteMarkup(l,r.nom):u!==n.TAB.SUR_PLACE&&p&&(a+=t.buildToWriteMarkup(l,r.nom)):a+=t.buildToWriteMarkup(l,r.nom)),s=r.coordonneesNumDTO,a+=t.buildFaxMarkup(s.fax),s.hasOwnProperty("sve")&&null!==s.sve?a+=t.buildSVEMarkup(s.sve):(a+=t.buildUrlMarkup(s.url),a+=t.buildEmailMarkup(s.email)),a+=t.buildPhoneMarkup(s.telephone,s.coutTelephone),a+=t.buildDateVerificationMarkup(r.dateMiseAjour,r.editeurSource)):(r.serviceDTOs&&e.each(r.serviceDTOs,function(i,r){var o=0===i?"where-related":"where-related-2";if(a+="<div class='"+o+"' itemscope itemtype='http://schema.org/GovernmentOrganization'>",a+=t.buildAddressTitleMarkup(r.nom),""!==r.dateMiseAjour&&(a+=t.buildDateVerificationMarkup(r.dateMiseAjour.substring(0,10))),r.centreAppelDTO){var c=r.centreAppelDTO;a+=t.buildCallCenterMarkup(c.telephone,c.coutTelephone,c.description),a+=t.buildOpeningDaysMarkup(c.openingDaysDTOList)}if(r.pointAcceuilPhysiqueDTO&&(e.each(r.pointAcceuilPhysiqueDTO.adresseDTOList,function(e,i){i.type!==n.ADDRESS_TYPE.PHYSICAL&&i.type!==n.ADDRESS_TYPE.GEOPOSTAL||(a+=t.buildToGoMarkup(i)),i.type!==n.ADDRESS_TYPE.POSTAL&&i.type!==n.ADDRESS_TYPE.GEOPOSTAL||(a+=t.buildToWriteMarkup(i,r.nom))}),a+=t.buildOpeningDaysMarkup(r.pointAcceuilPhysiqueDTO.openingDaysDTOs),null!==r.pointAcceuilPhysiqueDTO.coordonneesNumDTO&&(s=r.pointAcceuilPhysiqueDTO.coordonneesNumDTO,a+=t.buildUrlMarkup(s.url),a+=t.buildEmailMarkup(s.email),a+=t.buildFaxMarkup(s.fax),a+=t.buildPhoneMarkup(s.telephone,s.coutTelephone))),r.serviceEnLigneDTO){var l=r.serviceEnLigneDTO;a+=t.buildOnlineMarkup(l.url,l.description)}a+=t.buildCommentMarkup(r.commentaire),a+="</div>"}),a+="</div>")}}}),define("sp/persogeo/components/serviceEnLigneButton",["jquery"],function(e){"use strict";function t(t){e.each(t.urlDemarches,function(t,n){var i=n.code,r=n.url,o=e("[data-pivot-local-service-en-ligne="+i+"]");o.attr("href",r),o.removeClass("disabled"),o.removeAttr("tabindex");var a=e("[data-aNoter-raccordement-demarche="+i+"]");a.addClass("hidden")})}return{enable:t}}),define("sp/persogeo/components/resetSearch",["jquery","sp/persogeo/components/searchComponent"],function(e,t){"use strict";function n(n,i){var r=n.find("button[type=reset]");r.off("click"),r.on("click",function(){e.each(i,function(e,n){t.resetSearch(n)}),n.find('[data-persogeo="searchGeoAutocomplete"]').focus()})}return{bind:n}}),define("sp/persogeo/components/serverErrors",["sp/persogeo/components/htmlGenerator"],function(e){return{displayMessage:function(t){$("[data-pivot-local-service-en-ligne]").addClass("disabled"),$("[data-pivot-local-service-en-ligne]").attr("tabindex","-1"),$("[data-aNoter-raccordement-demarche]").removeClass("hidden");var n=e.buildTechnicalErrorMarkup($("p.toolbar-comment > a").attr("href"));t.next("[data-persogeo=annuaire-where]").children("[data-persogeo=confirm]").html(n)}}}),define("sp/persogeo/components/pivot",["jquery","sp/persogeo/components/constants","sp/persogeo/components/markup"],function(e,t,n){"use strict";function i(e){var t=e.clone();return t.attr("data-persogeo","pivot-cloned"),e.next().is('[data-persogeo="pivot-cloned"]')?t.insertAfter(e.nextAll('[data-persogeo="pivot-cloned"]').last()):t.insertAfter(e),t}function r(e,t,r,o,a){return e.is('[data-persogeo="pivot-selected"]')?e=i(e):e.attr("data-persogeo","pivot-selected"),t+=n.build(r,o,e),e.data("defaultContent",e.html()),a.desc=e.children("[data-persogeo=desc-organisme]").text(),a.title=e.children("[data-persogeo=where-section-title]").first().text(),e.html(t),a}function o(n,i,o){var a="",s=e.fn.a11y.uniqueId("ui-collapse"),c={title:"",desc:""};return n.is("[data-type-organisme='"+t.KEYWORD.LOCAL_PERSONNALISE_SUR_SP+"'][data-for="+i+"]")&&(c=r(n,a,s,o,c)),c}function a(e,t,n){var i=e.find("[data-pivot="+t+"]"),r=!1;"listeOuSAdresser"===i.parent().attr("data-liste-ousadresser-id")&&(r=!0),i.wrapAll("<li class='geo-perso-item' data-persogeo='pivot-content' id='id-li-"+t+"' />"),i.wrapAll("<ul id='id-ul-"+t+"' "+(r?"data-liste-ousadresser-id='listeOuSAdresser'":"")+"/>"),n.desc&&(i.parent("ul").parent("li").prepend("<p class='desc-organisme' data-persogeo='description'>"+n.desc+"</p>"),i.parent("ul").parent("li").find("[data-persogeo=pivot-selected]").attr("role","presentation")),n.title&&i.parent("ul").parent("li").prepend("<h3 data-persogeo='title' class='where-section-title'>"+n.title+"</h3>")}return{render:o,wrapAndDescribePivotsInContainer:a}}),define("persoGeo",["jquery","sp/persogeo/components/apiService","sp/persogeo/components/searchComponent","sp/persogeo/components/markup","sp/persogeo/components/htmlGenerator","sp/persogeo/components/serviceEnLigneButton","sp/persogeo/components/resetSearch","sp/persogeo/components/constants","sp/persogeo/components/container","sp/persogeo/components/serverErrors","sp/persogeo/components/pivot"],function(e,t,n,i,r,o,a,s,c,l,d){"use strict";e.fn.persoGeo=function(){function i(e,t,i){404===e?n.displayNoResultMessage(t,i):l.displayMessage(i)}function u(e,t,n,i){null!==n[0].organismes&&T(n,e)}function p(r,o){var a=r.serialize(),s=r.attr("id");o&&(a+="&insee="+o),e("body").addClass("loading"),t.getGeoData(a,function(e){u(s,A,e,a)},function(e){i(e.status,s,A)},function(){e("body").removeClass("loading"),n.focusOnConfirmation(r)})}function f(e,t,n,i,r){var o=i.find("[data-pivot-local-service-en-ligne]");o.length>0&&(o.addClass("disabled"),h(i),v(t,i)),i.find("[data-attention-persogeo-id]").addClass("hidden"),i.find("[data-aNoter-raccordement-demarche]").removeClass("hidden"),a.bind(e,r)}function h(e){var t="La commune que vous avez sélectionnée n’est pas reliée à notre service en ligne et ne pourra pas recevoir le dossier par voie dématérialisée. Vous pouvez cependant effectuer la démarche en ligne, télécharger les documents et les transmettre à la commune.",n="La commune que vous avez sélectionnée n’est pas reliée à notre service en ligne. Nous vous invitons donc à contacter votre commune pour connaitre les modalités existantes d’inscription sur les listes électorales.";
e.find('[data-aNoter-raccordement-demarche="depotDossierPACS"]').html(r.buildNoOnlineServiceMarkup(t)),e.find('[data-aNoter-raccordement-demarche="ILE"]').html(r.buildNoOnlineServiceMarkup(n)),e.find("[data-pivot-local-service-en-ligne]").removeClass("disabled"),e.find("[data-pivot-local-service-en-ligne]").removeClass("hidden")}function m(t,n){var i=e(n.find("[data-pivot-local-service-en-ligne]"));0===t.urlDemarches.length?i.length>0&&!e(n.parent()).is("[data-ou-s-informer]")&&(h(n),n.find("[data-attention-persogeo-id]").addClass("hidden"),n.find("[data-aNoter-raccordement-demarche]").removeClass("hidden"),n.find("[data-pivot-local-service-en-ligne]").addClass("hidden"),n.find("[data-pivot-local-service-en-ligne]").attr("tabindex","-1"),v(t,n)):(n.find("[data-aNoter-persogeo-id]").html(""),n.find("[data-attention-persogeo-id]").addClass("hidden"),n.find("[data-pivot-local-service-en-ligne]").removeClass("disabled"),n.find("[data-pivot-local-service-en-ligne]").removeClass("hidden"),o.enable(t))}function v(e,t){var n=t.find('[data-pivot-local-service-en-ligne="depotDossierPACS"]');if(n.length>0){n.removeClass("disabled"),n.removeClass("hidden"),n.removeAttr("tabindex"),n.addClass("enabled");var i=n.attr("href");if(i){if(i.indexOf("depotDossierPACS")!==-1){var r=i.indexOf("depotDossierPACS")+16;i=i.substr(0,r)+"/demarche?codeInseeCommune="+e.insee}n.attr("href",i)}}}function g(t,n,i,r){function o(t){e(t).attr("data-persogeo","pivot-hidden"),e(t).hide()}var a=t.find("[data-pivot][data-for="+n+"]");e.each(a,function(t,n){var a=e(n).is("[data-type-organisme='"+s.KEYWORD.LOCAL_PERSONNALISE_SUR_SP+"']"),c=e.inArray(e(n).attr("data-pivot"),i)===-1,l=e(n).is("[data-pivot^='paris_']"),d=e(n).is("[data-type-organisme='"+s.KEYWORD.LOCAL_PERSONNALISABLE+"']");a&&c?(l&&r!==s.DISTRICT.PARIS&&o(n),l||r!==s.DISTRICT.PARIS||o(n)):d&&l&&r!==s.DISTRICT.PARIS&&o(n)})}function b(t,n,i){n.isUnique&&(t.find("div").is("[class*=tab-pane]")?t.find("[class*=tab-pane]").each(function(t,r){d.wrapAndDescribePivotsInContainer(e(r),n.name,i)}):d.wrapAndDescribePivotsInContainer(t,n.name,i))}function y(t,n,i,r,o,s){var c=[];r.find("[data-aNoter-persogeo-id]").html(""),r.find("[data-attention-persogeo-id]").removeClass("hidden"),a.bind(t,s),x(),e.each(n.organismes,function(t,n){var i={name:n.pivotLocal,isUnique:e.inArray(n.pivotLocal,c)===-1};c.push(i.name);var a={};e.each(r.find("[data-pivot="+i.name+"]:not([data-persogeo=pivot-cloned])"),function(t,i){a=d.render(e(i),o,n)}),b(r,i,a)}),g(r,o,c,i),m(n,r)}function C(t){e.each(t.urlDemarches,function(e,n){n.url=n.url+"?codeInseeCommune="+t.insee})}function T(t,i){var r=e("#"+i),o=t[0];C(o);var a;o.insee&&(a=o.insee.substring(0,2));var s=c.getByFormId(i);e.each(s,function(e,t){n.resetSearch(t)});var l=0!==o.organismes.length||0!==o.urlDemarches.length;l?e.each(s,function(e,t){y(r,o,a,t,i,s)}):e.each(s,function(e,t){f(r,o,a,t,s)})}var A=this,k="",x=function(){k=""};return A.find('button[type="submit"]').removeAttr("disabled"),A.on("submit",function(e){e.preventDefault()}),n.initAutocomplete(A,function(e){p(A,e)}),{}}}),define("sp/vdd",["jquery","sp/modalHelper","sp/global","sp/vdd/vddTooltip","sp/marquage","persoGeo"],function(e,t,n,i,r){"use strict";function o(e,t){e.on("mouseover",function(){e.removeAttr("title")}),e.on("mouseout",function(){e.attr("title",t)})}function a(t){var n,i=e(t.currentTarget);n=e(t.currentTarget).parents().is("[role='tabpanel']")?i.parents("[role='tabpanel']"):e(t.currentTarget).parents().hasClass("tab-pane")?i.parents(".tab-pane"):i.parents("article"),r.disableXitiReport();var o=n.find("div[data-toggle-scope] button[data-toggle=collapse]");o.filter(function(){var t=n.find(e(this).data("target"));return t&&t.hasClass("collapse")&&t.hasClass("in")}).click(),r.enableXitiReport()}function s(t){var n,i,o=e(t.currentTarget);n=e(t.currentTarget).parents().is("[role='tabpanel']")?o.parents("[role='tabpanel']"):e(t.currentTarget).parents().hasClass("tab-pane")?o.parents(".tab-pane"):o.parents("article"),r.disableXitiReport(),i=n.find("div[data-toggle-scope] button[data-toggle='collapse']"),i.filter(function(){var t=e(this).parents(".collapse"),i=!1;if(t.each(function(){n.find(e(this)).length>0&&(i=!0)}),i)return!1;var r=n.find(e(this).data("target"));return r&&r.hasClass("collapse")&&!r.hasClass("in")}).click(),r.enableXitiReport()}function c(t,n,i){var r=e(".btn-modal-infographie");r.removeAttr("role"),e("#"+t).click(function(){"true"===e("#"+t).attr("aria-expanded")?e("#"+t).find("span.mediatype-text").text(n):e("#"+t).find("span.mediatype-text").text(i)})}return{loadInfoBulleDefinition:function(){e("a[data-definition]").each(function(t,r){var a=e(r).data().definition;if(a){var s=this;return e.get(n.getSpRootDomain()+"/infobulle/definition/"+a,function(t){var a=i.generateTooltipContent(t),c=e(r).text()+" : "+a;s.title=c,s.setAttribute("data-title",a),n.addTooltip(s,a),o(e(s),c)})}})},loadInfoBulleDefinitionTooltip:function(){e("span[data-definition]").each(function(t,r){var o=e(r).data().definition;if(o){var a=this;return e.get(n.getSpRootDomain()+"/infobulle/definition/"+o,function(t){var r=i.generateTooltipContent(t),o=r;a.title=o,a.setAttribute("title",o),n.addTooltip(a,r);var s=e(a);s.children("span.sr-only").text(" : "+o)})}})},loadInfoBulleAbreviation:function(){function t(t,i){t.length>0&&(i.title=t[0].textContent,n.addTooltip(i,t),o(e(this),t[0].textContent))}e("abbr[data-sigle]").each(function(){var n=e(this).data().sigle,i=this,r=e("div[data-sigle="+n+"]");t.call(this,r,i)}),e("abbr[data-acronyme]").each(function(){var n=e(this).data().acronyme,i=this,r=e("div[data-acronyme="+n+"]");t.call(this,r,i)})},onUncollapseAllHandler:a,onCollapseAllHandler:s,initCollapseUncollapse:function(){var t=e(".btn-fold"),n=e(".btn-unfold");t.on("click",a),n.on("click",s)},initShowMore:function(){e.each(e(".block-show-more"),function(t,n){var i,r=e(n),o=".fiche-title-1, .fiche-title-2, .fiche-title-3,.format";r.children().is(o)&&(i=r.children(o)[0].tagName,r.find(i).siblings("p").length>1&&(r.find(i).siblings("p:not(:first-child):not("+i+"+p)").hide(),r.find(i).siblings("div.demarche-button").hide())),r.children(".demarche-button").before("<div class='show-button'><button class='btn btn-show btn-block btn-default'>Afficher la suite</button></div>"),r.on("click",".btn-show",function(){e(this).parents(".block-show-more").children(o).siblings("p, div.demarche-button").show(200),r.children(".demarche-button").after("<p class='tool-fiche'><button class='btn btn-fold'>Replier</button></p>"),e(this).hide()}),r.on("click",".tool-fiche > .btn-fold",function(){e(this).parents(".block-show-more").children(o).siblings("p:not(:first-child):not("+i+"+p), div.demarche-button").hide(200),e(".btn-show").show(),e(this).hide()})})},initPersoGeo:function(){e("[data-application=geoSearchForm]").each(function(t,n){e(n).persoGeo()})},initShowExpiredArticle:function(){e("button[data-show=expiredArticle]").on("click",function(){e(".block-show-more").show(400),e(".block-show-more").attr("aria-hidden","false"),e(".block-show-more").removeAttr("hidden"),e(".block-show-more").first().attr("tabindex","-1"),e(".block-show-more").focus(),e(this).hide(),e(this).attr("aria-hidden","true")})},initPositionFocus:function(){e("div[data-show=focusPosition]").on("shown.bs.modal",function(){e("#confirme-fermer").focus()})},initShowDeprecated:function(){e("button[data-show=deprecated]").on("click",function(){e(".block-show-more").show(400),e(".block-show-more").attr("aria-hidden","false"),e(".block-show-more").removeAttr("hidden"),e(".block-show-more").first().attr("tabindex","-1"),e(".block-show-more").focus(),e(this).hide(),e(this).attr("aria-hidden","true")})},initShowInfosNoPerso:function(){e("button[data-show=showInfosNoPerso]").on("click",function(){e(".block-show-more").show(400).attr("aria-hidden","false").removeAttr("hidden"),e(".block-show-more").first().attr("tabindex","-1").focus(),e(".btn-block-show-more-box").hide().attr("aria-hidden","true")})},showFilAriane:function(){e("button.see-breadcrumb").click(function(t){e(".see-breadcrumb").hide(),e("p.breadcrumb-list").show(),e("p.breadcrumb-list > span:eq(0) > a").focus(),t.preventDefault()})},buttonCollapse:c}}),define("text",["module"],function(e){"use strict";function t(e,t){return void 0===e||""===e?t:e}function n(e,n,i,r){if(n===r)return!0;if(e===i){if("http"===e)return t(n,"80")===t(r,"80");if("https"===e)return t(n,"443")===t(r,"443")}return!1}var i,r,o,a,s,c=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],l=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,d=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,u="undefined"!=typeof location&&location.href,p=u&&location.protocol&&location.protocol.replace(/\:/,""),f=u&&location.hostname,h=u&&(location.port||void 0),m={},v=e.config&&e.config()||{};return i={version:"2.0.15",strip:function(e){if(e){e=e.replace(l,"");var t=e.match(d);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:v.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;t<3;t+=1){n=c[t];try{e=new ActiveXObject(n)}catch(e){}if(e){c=[n];break}}return e},parseName:function(e){var t,n,i,r=!1,o=e.lastIndexOf("."),a=0===e.indexOf("./")||0===e.indexOf("../");return o!==-1&&(!a||o>1)?(t=e.substring(0,o),n=e.substring(o+1)):t=e,i=n||t,o=i.indexOf("!"),o!==-1&&(r="strip"===i.substring(o+1),i=i.substring(0,o),n?n=i:t=i),{moduleName:t,ext:n,strip:r}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,r,o){var a,s,c,l=i.xdRegExp.exec(e);return!l||(a=l[2],s=l[3],s=s.split(":"),c=s[1],s=s[0],(!a||a===t)&&(!s||s.toLowerCase()===r.toLowerCase())&&(!c&&!s||n(a,c,t,o)))},finishLoad:function(e,t,n,r){n=t?i.strip(n):n,v.isBuild&&(m[e]=n),r(n)},load:function(e,t,n,r){if(r&&r.isBuild&&!r.inlineText)return void n();v.isBuild=r&&r.isBuild;var o=i.parseName(e),a=o.moduleName+(o.ext?"."+o.ext:""),s=t.toUrl(a),c=v.useXhr||i.useXhr;return 0===s.indexOf("empty:")?void n():void(!u||c(s,p,f,h)?i.get(s,function(t){i.finishLoad(e,o.strip,t,n)},function(e){n.error&&n.error(e)}):t([a],function(e){i.finishLoad(o.moduleName+"."+o.ext,o.strip,e,n)}))},write:function(e,t,n,r){if(m.hasOwnProperty(t)){var o=i.jsEscape(m[t]);n.asModule(e+"!"+t,"define(function () { return '"+o+"';});\n")}},writeFile:function(e,t,n,r,o){var a=i.parseName(t),s=a.ext?"."+a.ext:"",c=a.moduleName+s,l=n.toUrl(a.moduleName+s)+".js";i.load(c,n,function(t){var n=function(e){return r(l,e)};n.asModule=function(e,t){return r.asModule(e,l,t)},i.write(e,c,n,o)},o)}},"node"===v.env||!v.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(r=require.nodeRequire("fs"),i.get=function(e,t,n){try{var i=r.readFileSync(e,"utf8");"\ufeff"===i[0]&&(i=i.substring(1)),t(i)}catch(e){n&&n(e)}}):"xhr"===v.env||!v.env&&i.createXhr()?i.get=function(e,t,n,r){var o,a=i.createXhr();if(a.open("GET",e,!0),r)for(o in r)r.hasOwnProperty(o)&&a.setRequestHeader(o.toLowerCase(),r[o]);v.onXhr&&v.onXhr(a,e),a.onreadystatechange=function(i){var r,o;4===a.readyState&&(r=a.status||0,r>399&&r<600?(o=new Error(e+" HTTP status: "+r),o.xhr=a,n&&n(o)):t(a.responseText),v.onXhrComplete&&v.onXhrComplete(a,e))},a.send(null)}:"rhino"===v.env||!v.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?i.get=function(e,t){var n,i,r="utf-8",o=new java.io.File(e),a=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),r)),c="";try{for(n=new java.lang.StringBuffer,i=s.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),null!==i&&n.append(i);null!==(i=s.readLine());)n.append(a),n.append(i);c=String(n.toString())}finally{s.close()}t(c)}:("xpconnect"===v.env||!v.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(o=Components.classes,a=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in o,i.get=function(e,t){var n,i,r,c={};s&&(e=e.replace(/\//g,"\\")),r=new FileUtils.File(e);try{n=o["@mozilla.org/network/file-input-stream;1"].createInstance(a.nsIFileInputStream),n.init(r,1,0,!1),i=o["@mozilla.org/intl/converter-input-stream;1"].createInstance(a.nsIConverterInputStream),i.init(n,"utf-8",n.available(),a.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),i.readString(n.available(),c),i.close(),n.close(),t(c.value)}catch(e){throw new Error((r&&r.path||"")+": "+e)}}),i}),define("text!sp/choice-tree/choiceTreeTemplate.html",[],function(){return'<div class="choice-tree-list" data-test="not-for-print">\n  {{#previousChoicesNodes}}\n  <div class="choice-tree-item">\n    <div class="choice-tree-previous-choice">\n      <p class="sr-only" tabindex="-1" aria-describedby="choice-tree-item-{{choiceTreeId}}-{{id}}">vous avez choisi</p>\n      <h4 class="choice-tree-title" id="choice-tree-item-{{choiceTreeId}}-{{id}}">\n        <span class="choice-tree-number-outside">\n          <span class="choice-tree-number">\n            <span class="icon icon-success" aria-hidden="true"></span>\n          </span>\n        </span>\n        <span class="choice-tree-previous-choice-title printArea">{{title}}</span>\n      </h4>\n      <div class="choice-tree-helpmodify" data-id="choice-tree-helpmodify">\n        <button title="Modifier" class="btn btn-default btn-rg-edit" data-node-id="{{id}}"\n                aria-describedby="choice-tree-item-{{choiceTreeId}}-{{id}}">\n          <span class="icon icon-edit" aria-hidden="true"></span>\n          <span class="blank">Modifier</span>\n        </button>\n      </div>\n    </div>\n    {{#introductionIsNotBlank}}\n    <p class="choice-notice" data-test="introduction-cas">\n      {{introduction}}\n    </p>\n    {{/introductionIsNotBlank}}\n\n  </div>\n\n  {{/previousChoicesNodes}}\n  {{#content}}\n\n  <div class="choice-tree-item no-print">\n\n    <div class="choice-tree-item-demarche printArea" data-test="choiceTreeResult">\n      <div class="choice-tree-list-answer">{{{content}}}</div>\n    </div>\n    <p class="tool-fiche">\n      <button class="btn btn-print">Imprimer cette section</button>\n    </p>\n  </div>\n  {{/content}}\n  {{^content}}\n  <div class="choice-tree-item">\n    <div class="choice-tree-current-choices">\n      <p class="sr-only" tabindex="-1">Choisir votre cas</p>\n      <ul class="choice-tree-choice-list no-print">\n        {{#currentChoicesNodes}}\n        <li class="choice-tree-choice">\n          <button class="btn btn-link btn-like-radio"\n                  type="button"\n                  data-node-id="{{id}}"\n                  data-xiti-name="{{dataXitiName}}"\n                  data-xiti-type="{{dataXitiType}}">\n            {{title}}\n          </button>\n          {{{helpmodify}}}\n          {{{dataAideHtml}}}\n        </li>\n        {{/currentChoicesNodes}}\n      </ul>\n    </div>\n  </div>\n  {{/content}}\n</div>\n'}),define("text!sp/choice-tree/choiceTreePrintableTemplate.html",[],function(){return'<div class="choice-tree-list print-only" data-test="for-print">\n  {{#contentFull}}\n   {{{contentFull}}}\n  {{/contentFull}}\n</div>'}),define("sp/choice-tree/component/printModule",["jquery"],function(e){"use strict";function t(){e("div.choice-tree-list.print-only").addClass("no-print"),e("div.choice-tree-list.print-only").removeClass("print-only"),e("div.svg-inline").addClass("print-only printArea"),e("p.tool-fiche").addClass("no-print"),e("div[data-id=demarche-button]").attr("align","center"),e("[data-id=linkToPrint]").attr("hidden",!1).attr("aria-hidden",!1).attr("style","display: block;"),e("div.fiche-item-content.printArea.collapse.in > ul.nav.nav-tabs > li:not(.active)").addClass("no-print"),e("div.fiche-item-content.printArea.collapse.in > div.tab-content > div.tab-pane:not(.active)").addClass("no-print"),e("div.fiche-item-content.printArea.collapse.in > div.bloc-edito.bloc-aSavoir").addClass("no-print")}function n(){e("div.choice-tree-list.no-print").addClass("print-only"),e("div.choice-tree-list.print-only").removeClass("no-print"),e("div[data-id=demarche-button]").removeAttr("align"),e("p.tool-fiche").removeClass("no-print"),e("div.svg-inline").removeClass("print-only").removeClass("printArea"),e("[data-id=linkToPrint]").attr("hidden",!0).attr("aria-hidden",!0).removeAttr("style"),e("div.fiche-item-content.printArea.collapse.in > ul.nav.nav-tabs > li:not(.active)").removeClass("no-print"),e("div.fiche-item-content.printArea.collapse.in > div.tab-content > div.tab-pane:not(.active)").removeClass("no-print"),e("div.fiche-item-content.printArea.collapse.in > div.bloc-edito.bloc-aSavoir").removeClass("no-print")}return{beforePrintAction:t,afterPrintAction:n}}),define("sp/choice-tree/choiceTree",["jquery","mustache","text!sp/choice-tree/choiceTreeTemplate.html","text!sp/choice-tree/choiceTreePrintableTemplate.html","sp/choice-tree/component/printModule","sp/global","sp/vdd/vddTooltip","lozad/lozad.min","jqueryM/jquery.printarea","persoGeo"],function(e,t,n,i,r,o,a,s){function c(){function c(t){e(t).find("[id]").removeAttr("id"),e(t).find("[data-application]").removeAttr("data-application")}function l(o){function a(t){function n(t){var n=[];return t.each(function(t,i){var r={id:t,title:e(i).children(".choice-item").text(),dataXitiName:e(i).children(".choice-item").attr("data-xiti-name"),dataXitiType:e(i).children(".choice-item").attr("data-xiti-type"),introduction:e(i).children(".choice-notice").text(),introductionIsNotBlank:0!==e(i).children(".choice-notice").text().trim().length,listNumber:t+1,printableContent:e(i).children("[data-test=choiceItem]"),helpmodify:function(){if(0!==e(i).children(".choice-tree-helpmodify").length){var t=e(i).children(".choice-tree-helpmodify").html(),n='<div class="choice-tree-helpmodify">'+t+"</div>";return n}return""},dataAideHtml:function(){if(e(i).children("[data-test=aide-html]")){var t=e(i).children("[data-test=modal-aide-html]");return t.html()}return""},content:function(){var t=e(i).children(".choice-item").attr("data-condition");if(t){var n="$('body').trigger('agenda', '"+t+"')",r='<div class="schedule"><ul id="agenda" class="schedule-list-day"></ul><script>'+n+"</script></div>",o=e(i).children("div.choice-tree-item-content");return e(o).children("p:eq(0)").hide(),r=r+"<br>"+e(o).html()}return e(i).children("div.choice-tree-item-content").html()}};n.push(r)}),n}function i(e){if(0===e.currentChoicesNodes.length){var t=e.previousChoicesNodes[e.previousChoicesNodes.length-1];return t.content}return null}function r(e){if(0===e.currentChoicesNodes.length){var t=e.previousChoicesNodes[e.previousChoicesNodes.length-1];return t.content}for(var n="",i=0;i<e.currentChoicesNodes.length-1;i++){var r=e.previousChoicesNodes[i];if(r){for(var o="",a=0;a<r.printableContent.length;a++)r.printableContent[a]&&(o+=r.printableContent[a].innerHTML);n+=o}}return n}var o={};return o.currentChoicesNodes=n(t.$currentChoices),o.previousChoicesNodes=n(t.$previousChoices),o.$parentDiv=t.$parentDiv,o.ghostNumber=o.previousChoicesNodes.length+1,o.content=i(o),o.contentFull=r(o),o.choiceTreeId=t.choiceTreeId,o.$choiceTree=t.$choiceTree,o.$choiceTreeNextSibling=t.$choiceTreeNextSibling,o.contentFull||(o.contentFull=o.$choiceTree.html()),o}function c(e){return t.render(n,e)}function u(e){return t.render(i,e)}function f(e,t){0!==t.length?e.$currentChoices=t.children(".choice-tree-item"):e.$currentChoices=e.$choiceTree.children(".choice-tree-item")}function h(t,n){var i=n.parents(".choice-tree-item").toArray().reverse();0!==n.length&&i.push(n),t.$previousChoices=e(i)}function m(t,n){n.each(function(n,i){e(i).on("click",function(){var n=e(t.$currentChoices.get(e(i).data("nodeId")));f(t,n),h(t,n),l(t);var r=e(".choice-tree-list[data-test=not-for-print]:eq("+t.choiceTreeId+")");r.find("div.choice-tree-previous-choice > p.sr-only").last().focus(),d(r.find("div.choice-tree-item-demarche")),p(r.find("div.choice-tree-item-demarche")),s().observe()})})}function v(t,n){n.each(function(n,i){e(i).on("click",function(){var n=e(t.$previousChoices.get(e(i).data("nodeId")));f(t,n.parent(".choice-tree-item")),h(t,n.parent(".choice-tree-item")),l(t);var r=e(".choice-tree-list[data-test=not-for-print]:eq("+t.choiceTreeId+")");r.find("div.choice-tree-current-choices > p.sr-only").focus()})})}function g(){var t=e("div.choice-tree-list button.btn.btn-print");t.unbind("click"),t.on("click",function(){e(".logo, main > .breadcrumb, article > header").addClass("printArea"),r.beforePrintAction(),e(".printArea").printArea(),r.afterPrintAction()})}function b(t){t.find("[data-application=geoSearchForm]").each(function(t,n){e(n).persoGeo()})}var y=a(o),C=y.$parentDiv;C.find("div.choice-tree-list").remove(),y.$choiceTreeNextSibling.length>0?(y.$choiceTreeNextSibling.before(c(y)),y.$choiceTreeNextSibling.before(u(y))):(C.append(c(y)),C.append(u(y)));var T=C.find("div.choice-tree-list .btn.btn-link.btn-like-radio");m(o,T),T=C.find("div.choice-tree-helpmodify > button.btn.btn-default.btn-rg-edit"),v(o,T),g(),b(C)}function d(t){t.find("abbr[data-sigle]").each(function(){var t=e(this).data().sigle,n=this,i=e("div[data-sigle="+t+"]");u.call(this,i,n)}),t.find("abbr[data-acronyme]").each(function(){var t=e(this).data().acronyme,n=this,i=e("div[data-acronyme="+t+"]");u.call(this,i,n)})}function u(t,n){t.length>0&&(o.addTooltip(n,t),f(e(this),t[0].textContent))}function p(t){t.find("a[data-definition]").each(function(t,n){var i=e(n).data().definition;if(i){var r=this;return e.get(o.getSpRootDomain()+"/infobulle/definition/"+i,function(t){var i=a.generateTooltipContent(t),s=e(n).text()+" : "+i;r.title=s,r.setAttribute("data-title",i),o.addTooltip(r,i),f(e(r),s)})}})}function f(e,t){e.on("mouseover",function(){e.removeAttr("title")}),e.on("mouseout",function(){e.attr("title",t)})}var h,m=e(".choice-tree");m.each(function(t,n){h=e(n).clone();var i={$currentChoices:h.children(".choice-tree-item"),$previousChoices:e(),$parentDiv:e(n).parent("div"),choiceTreeId:t,$choiceTree:h,$choiceTreeNextSibling:e(n).next()},r=i.$currentChoices.length,o=1;r>o&&(e(n).hide(),c(n),l(i))}),e("body").on("shown.bs.modal",function(t){var n=e(t.relatedTarget).attr("data-target-hashcode");n&&e("#btn-fermer-"+n).focus()})}return{transform:c}}),require(["sp/vdd","sp/choice-tree/choiceTree","domReady"],function(e,t,n){n(function(){e.loadInfoBulleAbreviation(),e.loadInfoBulleDefinition(),e.loadInfoBulleDefinitionTooltip(),e.initCollapseUncollapse(),t.transform(),e.initShowMore(),e.initPersoGeo(),e.initShowExpiredArticle(),e.initShowDeprecated(),e.initPositionFocus(),e.showFilAriane(),e.initShowInfosNoPerso()})}),define("../app/coperia",function(){});